#!/usr/bin/perl -l

use strict;
use warnings;

use LWP::Simple;
use XML::XPath;

die "Usage: $0 abbr [abbr]..." unless @ARGV;

my $url     = 'http://acronyms.silmaril.ie/cgi-bin/xaa?';
my $acro    = '/acronym/found/acro';
my $counter = 0;
foreach (@ARGV) {
    # <e></e> is just en empty valid xml
    my @acros =
      XML::XPath->new( xml => get("$url$_") || '<e></e>' )->findnodes($acro);
    next unless @acros;
    print '' if $counter;
    print;
    map {
        my $node = $_;
        my @val = map { $node->findvalue("$_/text()") } ( 'expan', 'comment' );
        print @{ [ $val[0] . ( $val[1] ? " /* $val[1] */" : '' ) ] };
    } @acros;
    $counter++;
}
